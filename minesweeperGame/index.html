<!DOCTYPE html>
<html class="dark" lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Bomb Squad - Rase Games</title>
    <link href="https://fonts.googleapis.com/css2?family=Spline+Sans:wght@300;400;500;600;700&display=swap"
        rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:wght,FILL@100..700,0..1&display=swap"
        rel="stylesheet">
    <script src="https://cdn.tailwindcss.com?plugins=forms,container-queries"></script>
    <script src="../auth.js"></script>
    <script src="../challenges.js"></script>
    <script src="../leaderboard.js"></script>
    <script>
        tailwind.config = {
            darkMode: "class",
            theme: {
                extend: {
                    colors: {
                        "primary": "#0f49bd",
                        "background-light": "#f6f6f8",
                        "background-dark": "#101622",
                        "surface-dark": "#1c2433",
                        "surface-light": "#ffffff",
                    },
                    fontFamily: {
                        "display": ["Spline Sans", "sans-serif"]
                    },
                    borderRadius: { "DEFAULT": "0.25rem", "lg": "0.5rem", "xl": "0.75rem", "full": "9999px" },
                },
            },
        }
    </script>
    <style>
        ::-webkit-scrollbar {
            width: 8px;
        }

        ::-webkit-scrollbar-track {
            background: #101622;
        }

        ::-webkit-scrollbar-thumb {
            background: #282e39;
            border-radius: 4px;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: #3d4554;
        }

        .cell-exploded {
            animation: explode 0.3s ease;
        }

        @keyframes explode {
            0% {
                transform: scale(1);
            }

            50% {
                transform: scale(1.2);
                background: rgba(255, 0, 0, 0.4);
            }

            100% {
                transform: scale(1);
            }
        }
    </style>
    <link rel="stylesheet" href="../auth.css">
</head>

<body
    class="font-display bg-background-light dark:bg-background-dark text-slate-900 dark:text-white min-h-screen flex flex-col overflow-x-hidden">

    <!-- RaseGames Header -->
    <header
        class="flex items-center justify-between border-b border-solid border-slate-200 dark:border-slate-800 px-6 py-4 bg-surface-light dark:bg-surface-dark sticky top-0 z-50">
        <div class="flex items-center gap-4">
            <a href="/games"
                class="text-xl font-bold leading-tight tracking-tight hover:text-primary transition-colors">Rase
                Games</a>
        </div>
        <div class="flex items-center gap-6">
            <a href="/games"
                class="text-sm text-slate-500 dark:text-slate-400 hover:text-primary transition-colors">Games</a>
            <a href="/about"
                class="text-sm text-slate-500 dark:text-slate-400 hover:text-primary transition-colors">About</a>
            <a href="/leaderboard"
                class="text-sm text-slate-500 dark:text-slate-400 hover:text-primary transition-colors">Leaderboards</a>
            <a href="/community"
                class="text-sm text-slate-500 dark:text-slate-400 hover:text-primary transition-colors">Community</a>
            <div id="user-display"></div>
        </div>
    </header>

    <main class="flex-1 flex flex-col items-center justify-start p-4 md:p-8 w-full max-w-5xl mx-auto">
        <!-- Game Controls & HUD -->
        <div class="w-full flex flex-col gap-6 mb-8">
            <!-- Title -->
            <div class="text-center">
                <h1 class="text-3xl font-bold mb-2">Bomb <span class="text-primary">Squad</span></h1>
                <p class="text-slate-500 dark:text-slate-400 text-sm">Clear the field without triggering mines!</p>
            </div>

            <!-- Difficulty Selector -->
            <div class="flex justify-center">
                <div class="inline-flex bg-slate-200 dark:bg-surface-dark p-1.5 rounded-xl shadow-sm">
                    <label class="cursor-pointer group relative px-6 py-2 rounded-lg transition-all duration-200">
                        <input class="peer sr-only" name="difficulty" type="radio" value="easy" data-size="9"
                            data-mines="10">
                        <span
                            class="absolute inset-0 bg-white dark:bg-slate-700 rounded-lg shadow-sm opacity-0 peer-checked:opacity-100 transition-all duration-200"></span>
                        <span
                            class="relative text-sm font-medium text-slate-500 dark:text-slate-400 peer-checked:text-slate-900 dark:peer-checked:text-white">Easy</span>
                    </label>
                    <label class="cursor-pointer group relative px-6 py-2 rounded-lg transition-all duration-200">
                        <input checked class="peer sr-only" name="difficulty" type="radio" value="medium" data-size="12"
                            data-mines="25">
                        <span
                            class="absolute inset-0 bg-primary rounded-lg shadow-md shadow-primary/20 opacity-0 peer-checked:opacity-100 transition-all duration-200"></span>
                        <span
                            class="relative text-sm font-medium text-slate-500 dark:text-slate-400 peer-checked:text-white">Medium</span>
                    </label>
                    <label class="cursor-pointer group relative px-6 py-2 rounded-lg transition-all duration-200">
                        <input class="peer sr-only" name="difficulty" type="radio" value="hard" data-size="16"
                            data-mines="50">
                        <span
                            class="absolute inset-0 bg-white dark:bg-slate-700 rounded-lg shadow-sm opacity-0 peer-checked:opacity-100 transition-all duration-200"></span>
                        <span
                            class="relative text-sm font-medium text-slate-500 dark:text-slate-400 peer-checked:text-slate-900 dark:peer-checked:text-white">Hard</span>
                    </label>
                </div>
            </div>

            <!-- Dashboard Stats -->
            <div class="grid grid-cols-2 md:grid-cols-4 gap-4 w-full">
                <!-- Time -->
                <div
                    class="bg-surface-light dark:bg-surface-dark p-4 rounded-xl shadow-sm border border-slate-200 dark:border-slate-800 flex flex-col items-center justify-center col-span-2 md:col-span-2 order-1 md:order-2">
                    <span
                        class="text-xs font-semibold uppercase tracking-wider text-slate-500 dark:text-slate-400 mb-1">Time
                        Elapsed</span>
                    <div class="flex items-baseline gap-1 text-3xl font-mono font-bold text-slate-900 dark:text-white">
                        <span id="timerMin">00</span><span class="animate-pulse">:</span><span id="timerSec">00</span>
                    </div>
                </div>
                <!-- Mines Counter -->
                <div
                    class="bg-surface-light dark:bg-surface-dark p-4 rounded-xl shadow-sm border border-slate-200 dark:border-slate-800 flex items-center justify-between order-2 md:order-1">
                    <div>
                        <p class="text-xs font-semibold uppercase tracking-wider text-slate-500 dark:text-slate-400">
                            Mines</p>
                        <p id="mineCount" class="text-2xl font-bold text-slate-900 dark:text-white mt-1">10</p>
                    </div>
                    <div class="size-10 rounded-full bg-red-500/10 flex items-center justify-center text-red-500">
                        <span class="material-symbols-outlined">bomb</span>
                    </div>
                </div>
                <!-- Flags Counter -->
                <div
                    class="bg-surface-light dark:bg-surface-dark p-4 rounded-xl shadow-sm border border-slate-200 dark:border-slate-800 flex items-center justify-between order-3 md:order-3">
                    <div>
                        <p class="text-xs font-semibold uppercase tracking-wider text-slate-500 dark:text-slate-400">
                            Flags</p>
                        <p id="flagCount" class="text-2xl font-bold text-slate-900 dark:text-white mt-1">0</p>
                    </div>
                    <div class="size-10 rounded-full bg-primary/20 flex items-center justify-center text-primary">
                        <span class="material-symbols-outlined">flag</span>
                    </div>
                </div>
            </div>
        </div>

        <!-- Game Board Container -->
        <div
            class="w-full max-w-2xl bg-surface-light dark:bg-surface-dark p-2 sm:p-4 rounded-2xl shadow-lg border border-slate-200 dark:border-slate-800">
            <div id="gameBoard" class="grid gap-1 sm:gap-2 aspect-square w-full"></div>
        </div>

        <!-- Controls -->
        <div class="mt-8 flex flex-col sm:flex-row gap-4">
            <button id="restartBtn"
                class="bg-primary hover:bg-primary/90 text-white font-medium px-8 py-3 rounded-xl transition-all shadow-lg shadow-primary/20 flex items-center justify-center gap-2">
                <span class="material-symbols-outlined">refresh</span>
                New Game
            </button>
        </div>

        <p class="mt-6 text-sm text-slate-500 dark:text-slate-400">
            ðŸ‘† Tap to reveal â€¢ ðŸ‘† Long press to flag
        </p>

        <!-- Game Over Overlay -->
        <div id="gameOverScreen"
            class="fixed inset-0 bg-black/80 backdrop-blur-sm z-50 flex items-center justify-center hidden">
            <div
                class="bg-surface-light dark:bg-surface-dark p-8 rounded-2xl shadow-2xl border border-slate-200 dark:border-slate-700 max-w-md text-center">
                <h2 id="resultText" class="text-3xl font-bold mb-4">Game Over</h2>
                <p id="resultMessage" class="text-slate-500 dark:text-slate-400 mb-6"></p>
                <button id="playAgainBtn"
                    class="bg-primary hover:bg-primary/90 text-white font-medium px-8 py-3 rounded-xl transition-all shadow-lg shadow-primary/20 flex items-center justify-center gap-2 mx-auto">
                    <span class="material-symbols-outlined">refresh</span>
                    Play Again
                </button>
            </div>
        </div>
    </main>

    <script src="game.js"></script>
</body>

</html>