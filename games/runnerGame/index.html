<!DOCTYPE html>
<html class="dark" lang="en">

<head>
    <meta charset="utf-8" />
    <meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" name="viewport" />
    <title>Cyber Runner | Rase Games</title>

    <link rel="stylesheet" href="/styles/style.css">
    <link rel="stylesheet" href="/styles/auth.css">

    <link href="https://fonts.googleapis.com" rel="preconnect" />
    <link crossorigin="" href="https://fonts.gstatic.com" rel="preconnect" />
    <link href="https://fonts.googleapis.com/css2?family=Spline+Sans:wght@300;400;500;600;700&display=swap"
        rel="stylesheet" />
    <link href="https://fonts.googleapis.com/css2?family=Clash+Display:wght@400;500;600;700&display=swap"
        rel="stylesheet">

    <link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:wght,FILL@100..700,0..1&display=swap"
        rel="stylesheet" />

    <script src="https://cdn.tailwindcss.com?plugins=forms,container-queries"></script>

    <script>
        tailwind.config = {
            darkMode: "class",
            theme: {
                extend: {
                    colors: {
                        "primary": "#3b82f6",
                        "primary-light": "#60a5fa",
                        "background-dark": "#0a0f1a",
                        "surface-dark": "#111827",
                        "surface-border": "#1e3a5f",
                        "text-muted": "#94a3b8",
                    },
                    fontFamily: {
                        "display": ["Spline Sans", "sans-serif"]
                    },
                    borderRadius: { "DEFAULT": "1rem", "lg": "2rem", "xl": "3rem", "full": "9999px" },
                    backgroundImage: {
                        'grid-pattern': "linear-gradient(to right, #1e3a5f 1px, transparent 1px), linear-gradient(to bottom, #1e3a5f 1px, transparent 1px)",
                    }
                },
            },
        }
    </script>
    <style>
        @keyframes float {
            0% {
                transform: translateY(0px);
            }

            50% {
                transform: translateY(-10px);
            }

            100% {
                transform: translateY(0px);
            }
        }

        @keyframes pulse-glow {

            0%,
            100% {
                box-shadow: 0 0 20px rgba(59, 130, 246, 0.4);
            }

            50% {
                box-shadow: 0 0 40px rgba(59, 130, 246, 0.7);
            }
        }

        .animate-float {
            animation: float 6s ease-in-out infinite;
        }

        .animate-pulse-glow {
            animation: pulse-glow 3s infinite;
        }

        .glass-panel {
            background: rgba(10, 15, 26, 0.8);
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
        }

        /* CRITICAL: Screen visibility */
        .game-screen {
            display: none !important;
        }

        .game-screen.active {
            display: flex !important;
        }

        #gameCanvas {
            display: block;
            max-width: 100%;
            max-height: 100%;
            border-radius: 1rem;
            box-shadow: 0 0 30px rgba(59, 130, 246, 0.2);
        }

        /* Hide rasegames navbar styles that might conflict */
        body {
            background: #0a0f1a !important;
        }
    </style>
</head>

<body class="bg-background-dark text-white font-display overflow-x-hidden selection:bg-primary selection:text-white">

    <nav class="navbar" style="position: relative; z-index: 100;">
        <a href="/pages/games" class="nav-logo">
            <span class="logo-icon">ðŸŽ®</span>
            <span class="logo-text">Rase Games</span>
        </a>
        <div class="nav-links">
            <a href="/pages/games" class="nav-link">Games</a>
            <a href="/pages/about" class="nav-link">About</a>
            <a href="/pages/leaderboard" class="nav-link">Leaderboards</a>
            <a href="/raselab/"
                class="inline-flex items-center gap-2 px-3 py-1 rounded-full bg-gradient-to-r from-purple-600 to-pink-500 hover:from-purple-500 hover:to-pink-400 text-white text-xs font-bold shadow-[0_0_15px_rgba(168,85,247,0.4)] hover:shadow-[0_0_20px_rgba(168,85,247,0.6)] transition-all no-underline hover:scale-105">
                <span class="material-symbols-outlined text-[14px]">science</span>
                RaseLab
            </a>
        </div>
        <div id="user-display"></div>
    </nav>

    <div class="relative min-h-screen w-full flex flex-col overflow-hidden" style="padding-top: 70px;">

        <div class="absolute inset-0 z-0">

            <div class="absolute inset-0 bg-cover bg-center opacity-20 mix-blend-luminosity"
                style="background-image: url('https://images.unsplash.com/photo-1545569341-9eb8b30979d9?w=1920');">
            </div>

            <div class="absolute inset-0 bg-grid-pattern bg-[length:40px_40px] opacity-10 pointer-events-none"></div>

            <div class="absolute inset-0 bg-gradient-to-t from-background-dark via-background-dark/80 to-transparent">
            </div>
            <div class="absolute inset-0 bg-gradient-to-r from-background-dark via-transparent to-background-dark">
            </div>
        </div>


        <main id="mainMenu"
            class="game-screen active relative z-10 flex flex-1 flex-col items-center justify-center w-full max-w-7xl mx-auto px-4 py-8 lg:flex-row lg:justify-between">

            <div
                class="flex flex-col items-center lg:items-start text-center lg:text-left gap-8 max-w-2xl w-full pt-10 lg:pt-0">

                <div class="flex flex-col gap-2">
                    <div class="flex items-center justify-center lg:justify-start gap-2 mb-2">
                        <span
                            class="px-2 py-0.5 rounded text-[10px] font-bold bg-primary/20 text-primary border border-primary/30 tracking-widest">ENDLESS
                            RUNNER</span>
                    </div>
                    <h1
                        class="text-6xl md:text-8xl font-black text-white leading-[0.9] tracking-tighter drop-shadow-2xl">
                        CYBER<br />
                        <span
                            class="text-transparent bg-clip-text bg-gradient-to-r from-primary via-primary-light to-primary bg-[length:200%_auto] animate-pulse">RUNNER</span>
                    </h1>
                    <p class="text-text-muted text-lg md:text-xl font-normal max-w-md mt-4 leading-relaxed">
                        Navigate the neon grid. Hack the system. Survive the glitch.
                    </p>
                </div>


                <div
                    class="flex sm:hidden w-full justify-center gap-4 bg-surface-dark/50 p-4 rounded-xl border border-surface-border">
                    <div class="flex flex-col items-center">
                        <span class="material-symbols-outlined text-primary mb-1">diamond</span>
                        <span id="mobileCoins" class="font-bold">0</span>
                    </div>
                    <div class="w-px h-10 bg-surface-border"></div>
                    <div class="flex flex-col items-center">
                        <span class="material-symbols-outlined text-white mb-1">military_tech</span>
                        <span id="mobileBest" class="font-bold text-sm">BEST: 0</span>
                    </div>
                </div>


                <div class="flex flex-col w-full max-w-sm gap-4 mt-4">

                    <button id="playBtn"
                        class="group relative flex items-center justify-center w-full h-16 rounded-full bg-primary hover:bg-primary-light text-white gap-3 text-lg font-black tracking-widest transition-all transform hover:scale-[1.02] hover:-translate-y-1 animate-pulse-glow overflow-hidden">
                        <div
                            class="absolute inset-0 bg-white/20 translate-x-[-100%] group-hover:translate-x-[100%] transition-transform duration-700 skew-x-12">
                        </div>
                        <span
                            class="material-symbols-outlined text-3xl group-hover:rotate-12 transition-transform">play_circle</span>
                        <span>PLAY NOW</span>
                    </button>


                    <a href="/runnerGame/upgrades/"
                        class="flex items-center justify-center w-full h-14 rounded-full bg-surface-dark hover:bg-surface-border/50 border border-surface-border hover:border-primary/50 text-white gap-3 text-sm font-bold tracking-[0.1em] transition-all hover:shadow-[0_0_15px_rgba(59,130,246,0.1)]">
                        <span class="material-symbols-outlined text-text-muted">deployed_code</span>
                        <span>UPGRADES</span>
                        <div class="flex items-center gap-1 ml-2 px-2 py-1 bg-primary/20 rounded-full">
                            <span class="material-symbols-outlined text-primary text-sm">diamond</span>
                            <span id="headerCoins" class="text-primary text-sm font-bold">0</span>
                        </div>
                    </a>


                    <div class="flex justify-center gap-6 mt-4">
                        <a class="text-text-muted hover:text-white text-xs font-bold tracking-widest hover:underline decoration-primary underline-offset-4 transition-all"
                            href="/pages/leaderboard">LEADERBOARD</a>
                        <a class="text-text-muted hover:text-white text-xs font-bold tracking-widest hover:underline decoration-primary underline-offset-4 transition-all"
                            href="/pages/games">ALL GAMES</a>
                    </div>
                </div>
            </div>


            <div
                class="hidden lg:flex flex-1 justify-end items-center relative h-full min-h-[400px] w-full pointer-events-none">
                <div
                    class="relative w-[320px] bg-surface-dark/60 border border-surface-border rounded-2xl backdrop-blur-sm p-6 flex flex-col gap-4 animate-float shadow-2xl shadow-black/50">
                    <div class="flex justify-between items-center">
                        <h3 class="text-lg font-bold text-white">YOUR STATS</h3>
                        <span class="material-symbols-outlined text-primary">analytics</span>
                    </div>

                    <div class="grid grid-cols-2 gap-4">
                        <div class="bg-background-dark/50 rounded-xl p-4 text-center border border-surface-border/50">
                            <span class="material-symbols-outlined text-primary text-2xl">diamond</span>
                            <p id="statCoins" class="text-2xl font-black text-white mt-1">0</p>
                            <p class="text-xs text-text-muted">COINS</p>
                        </div>
                        <div class="bg-background-dark/50 rounded-xl p-4 text-center border border-surface-border/50">
                            <span class="material-symbols-outlined text-yellow-500 text-2xl">emoji_events</span>
                            <p id="statBest" class="text-2xl font-black text-white mt-1">0</p>
                            <p class="text-xs text-text-muted">BEST SCORE</p>
                        </div>
                    </div>

                    <div class="flex flex-col gap-2">
                        <div class="flex justify-between text-xs text-text-muted">
                            <span>Jump Power</span>
                            <span id="jumpLevel" class="text-primary">Lv.1</span>
                        </div>
                        <div class="h-2 bg-background-dark rounded-full overflow-hidden">
                            <div id="jumpBar" class="h-full bg-primary w-[20%] transition-all"></div>
                        </div>
                    </div>
                </div>

                <div
                    class="absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-[300px] h-[300px] bg-primary/10 rounded-full blur-[80px] pointer-events-none">
                </div>
            </div>
        </main>


        <main id="gameScreen"
            class="game-screen relative z-10 flex flex-1 flex-col items-center justify-center w-full px-4 py-4">

            <div
                class="w-full max-w-4xl flex justify-between items-center mb-4 glass-panel rounded-xl px-6 py-3 border border-surface-border/50">
                <div class="flex items-center gap-2">
                    <span class="material-symbols-outlined text-primary">timer</span>
                    <span class="text-xs text-text-muted font-bold">SCORE</span>
                    <span id="score" class="font-mono font-bold text-xl text-white">0</span>
                </div>
                <div class="flex items-center gap-2">
                    <span class="material-symbols-outlined text-primary">diamond</span>
                    <span id="coins" class="font-mono font-bold text-lg text-white">0</span>
                </div>
                <div class="flex items-center gap-2">
                    <span class="material-symbols-outlined text-text-muted">military_tech</span>
                    <span class="text-xs text-text-muted font-bold">BEST</span>
                    <span id="highScore" class="font-mono font-bold text-lg text-text-muted">0</span>
                </div>
            </div>


            <div
                class="relative w-full max-w-4xl aspect-video bg-surface-dark/50 rounded-2xl border border-surface-border overflow-hidden">
                <canvas id="gameCanvas"></canvas>
            </div>


            <div id="mobileControls" class="md:hidden mt-4 w-full max-w-4xl">
                <button id="jumpBtn"
                    class="w-full h-20 rounded-2xl bg-surface-dark border border-surface-border text-white font-bold text-lg tracking-widest active:bg-primary active:text-white transition-all flex items-center justify-center gap-2">
                    <span class="material-symbols-outlined text-3xl">keyboard_arrow_up</span>
                    <span>JUMP</span>
                </button>
            </div>
        </main>


        <main id="gameOverScreen"
            class="game-screen relative z-10 flex flex-1 flex-col items-center justify-center w-full px-4 py-8">
            <div
                class="flex flex-col items-center gap-8 max-w-md w-full glass-panel rounded-3xl p-8 border border-surface-border">

                <div class="text-center">
                    <span class="material-symbols-outlined text-6xl text-red-500 mb-4">warning</span>
                    <h2 class="text-4xl md:text-5xl font-black text-white tracking-tight">SYSTEM CRASH</h2>
                    <p class="text-text-muted mt-2">Connection terminated</p>
                </div>


                <div class="w-full grid grid-cols-2 gap-4">
                    <div class="bg-surface-dark/50 rounded-xl p-4 text-center border border-surface-border">
                        <span class="text-xs text-text-muted font-bold">FINAL SCORE</span>
                        <p id="finalScore" class="text-3xl font-black text-white mt-1">0</p>
                    </div>
                    <div class="bg-surface-dark/50 rounded-xl p-4 text-center border border-surface-border">
                        <span class="text-xs text-text-muted font-bold">COINS EARNED</span>
                        <p class="text-3xl font-black text-primary mt-1">+<span id="earnedCoins">0</span> ðŸ’Ž</p>
                    </div>
                </div>


                <div class="flex flex-col w-full gap-3">
                    <button id="retryBtn"
                        class="flex items-center justify-center w-full h-14 rounded-full bg-primary hover:bg-primary-light text-white gap-3 font-bold tracking-widest transition-all">
                        <span class="material-symbols-outlined">refresh</span>
                        <span>RETRY</span>
                    </button>
                    <button id="menuBtn"
                        class="flex items-center justify-center w-full h-12 rounded-full bg-surface-dark hover:bg-surface-border border border-surface-border text-white gap-3 font-bold tracking-widest transition-all">
                        <span class="material-symbols-outlined">home</span>
                        <span>MAIN MENU</span>
                    </button>
                </div>
            </div>
        </main>


        <main id="shopScreen" class="game-screen relative z-10 flex flex-1 h-full min-h-0 overflow-hidden">

            <div class="absolute inset-0 bg-grid-pattern bg-[length:40px_40px] opacity-10 pointer-events-none"></div>


            <div class="flex-1 overflow-y-auto p-4 lg:p-8">
                <div class="max-w-[1400px] mx-auto flex flex-col xl:flex-row gap-6">

                    <div class="flex-1 flex flex-col gap-6 min-h-0">

                        <div
                            class="flex items-center justify-between flex-wrap gap-4 pb-4 border-b border-surface-border/50">
                            <div class="flex items-center gap-4">
                                <button id="backBtn"
                                    class="flex items-center gap-2 px-4 py-2 rounded-lg bg-surface-dark hover:bg-surface-border text-text-muted hover:text-white transition-all border border-surface-border">
                                    <span class="material-symbols-outlined">arrow_back</span>
                                    <span class="font-bold text-sm">BACK</span>
                                </button>
                                <div class="flex items-center gap-2">
                                    <span class="material-symbols-outlined text-primary">terminal</span>
                                    <h2 class="text-white text-lg font-bold tracking-widest">NEURAL LINK // UPGRADES
                                    </h2>
                                </div>
                            </div>
                            <div class="flex items-center gap-3">
                                <div
                                    class="flex items-center bg-surface-dark border border-surface-border rounded-lg h-10 px-4 gap-2">
                                    <span class="material-symbols-outlined text-primary text-[20px]">diamond</span>
                                    <span id="shopCoins" class="text-white text-sm font-bold tracking-wider">0</span>
                                </div>
                            </div>
                        </div>


                        <div id="upgradesList" class="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4 pb-8"></div>
                    </div>


                    <div id="upgradeDetailPanel" class="hidden xl:block w-full xl:w-[380px] flex-shrink-0">
                        <div
                            class="xl:sticky xl:top-0 bg-surface-dark border border-primary rounded-xl shadow-[0_0_20px_rgba(59,130,246,0.15)] overflow-hidden flex flex-col">

                            <div class="relative w-full aspect-video bg-background-dark overflow-hidden">
                                <div id="upgradeImage"
                                    class="absolute inset-0 bg-cover bg-center opacity-80 transition-transform duration-700 hover:scale-105"
                                    style="background-image: url('https://images.unsplash.com/photo-1635070041078-e363dbe005cb?w=800');">
                                </div>

                                <div
                                    class="absolute inset-0 bg-[linear-gradient(transparent_50%,rgba(0,0,0,0.5)_50%)] bg-[length:100%_4px] pointer-events-none opacity-20">
                                </div>

                                <div id="upgradeBadge"
                                    class="absolute top-4 left-4 bg-primary text-white text-xs font-bold px-2 py-1 rounded uppercase tracking-wider">
                                    PASSIVE
                                </div>
                            </div>


                            <div class="p-6 flex flex-col gap-5">

                                <div>
                                    <h3 id="upgradeTitle"
                                        class="text-xl font-bold text-white mb-1 uppercase tracking-tight">Select an
                                        Upgrade</h3>
                                    <p id="upgradeSubtitle" class="text-primary text-xs font-medium tracking-wide mb-3">
                                        NEURAL INTERFACE</p>
                                    <p id="upgradeDesc"
                                        class="text-text-muted text-sm leading-relaxed border-l-2 border-primary/30 pl-3">
                                        Click on an upgrade card to view details and purchase.
                                    </p>
                                </div>


                                <div
                                    class="flex flex-col gap-3 p-4 bg-background-dark/50 rounded-lg border border-surface-border/50">
                                    <div
                                        class="flex items-center justify-between text-xs font-bold uppercase tracking-wider text-text-muted mb-1">
                                        <span>Effect Power</span>
                                        <span id="upgradeBonus" class="text-primary">+0%</span>
                                    </div>
                                    <div class="w-full bg-background-dark h-2 rounded-full overflow-hidden">
                                        <div id="upgradePowerBar"
                                            class="bg-primary h-full w-[0%] shadow-[0_0_10px_#3b82f6] transition-all">
                                        </div>
                                    </div>
                                </div>


                                <div class="flex items-center justify-between border-b border-surface-border/50 pb-4">
                                    <span class="text-sm text-text-muted">Current Level</span>
                                    <div class="flex items-center gap-2">
                                        <span id="upgradeLevel" class="text-white font-bold">0</span>
                                        <span id="upgradeMaxLevel" class="text-text-muted text-xs">/ 5</span>
                                    </div>
                                </div>


                                <div class="flex gap-1">
                                    <div id="levelBar1" class="h-1.5 flex-1 rounded-full bg-surface-border"></div>
                                    <div id="levelBar2" class="h-1.5 flex-1 rounded-full bg-surface-border"></div>
                                    <div id="levelBar3" class="h-1.5 flex-1 rounded-full bg-surface-border"></div>
                                    <div id="levelBar4" class="h-1.5 flex-1 rounded-full bg-surface-border"></div>
                                    <div id="levelBar5" class="h-1.5 flex-1 rounded-full bg-surface-border"></div>
                                </div>


                                <div class="flex flex-col gap-3 mt-2">
                                    <div class="flex justify-between items-center text-xs text-text-muted">
                                        <span>Upgrade Cost</span>
                                        <span>Balance: <span id="detailBalance">0</span> â™¦</span>
                                    </div>
                                    <button id="purchaseBtn"
                                        class="w-full bg-primary hover:bg-primary-light disabled:bg-surface-border disabled:cursor-not-allowed text-white font-bold text-lg h-14 rounded-lg flex items-center justify-between px-6 transition-all shadow-[0_0_15px_rgba(59,130,246,0.3)] hover:shadow-[0_0_25px_rgba(59,130,246,0.5)]">
                                        <span class="uppercase tracking-wider">Purchase</span>
                                        <div class="flex items-center gap-1 bg-background-dark/20 px-3 py-1 rounded">
                                            <span id="upgradeCost">0</span>
                                            <span class="material-symbols-outlined text-[18px]">diamond</span>
                                        </div>
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </main>


        <footer
            class="relative z-10 w-full border-t border-surface-border/30 bg-background-dark/90 backdrop-blur-md py-3 px-6 mt-auto">
            <div
                class="max-w-7xl mx-auto flex flex-col md:flex-row justify-between items-center gap-4 text-xs font-mono text-text-muted">
                <div class="flex items-center gap-4">
                    <span class="flex items-center gap-2">
                        <span class="relative flex h-2 w-2">
                            <span
                                class="animate-ping absolute inline-flex h-full w-full rounded-full bg-primary opacity-75"></span>
                            <span class="relative inline-flex rounded-full h-2 w-2 bg-primary"></span>
                        </span>
                        RASE GAMES
                    </span>
                </div>
                <div class="flex gap-6">
                    <span>v2.0</span>
                    <a href="/pages/about" class="hover:text-white transition-colors">ABOUT</a>
                </div>
            </div>
        </footer>
    </div>

    <script src="/scripts/challenges.js"></script>
    <script src="/scripts/auth.js"></script>
    <script src="/scripts/leaderboard.js"></script>
    <script src="/scripts/sounds.js"></script>
    <script src="game.js"></script>
</body>

</html>