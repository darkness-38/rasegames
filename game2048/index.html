<!DOCTYPE html>
<html class="dark" lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Power 2048 - Rase Games</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link crossorigin rel="preconnect" href="https://fonts.gstatic.com">
    <link href="https://fonts.googleapis.com/css2?family=Spline+Sans:wght@300;400;500;600;700&display=swap"
        rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:wght,FILL@100..700,0..1&display=swap"
        rel="stylesheet">
    <script src="https://cdn.tailwindcss.com?plugins=forms,container-queries"></script>
    <script src="../auth.js"></script>
    <script src="../leaderboard.js"></script>
    <script>
        tailwind.config = {
            darkMode: "class",
            theme: {
                extend: {
                    colors: {
                        "primary": "#0f49bd",
                        "primary-dark": "#0a3285",
                        "background-light": "#f6f6f8",
                        "background-dark": "#101622",
                        "grid-bg": "#1e293b",
                        "cell-empty": "#334155",
                    },
                    fontFamily: {
                        "display": ["Spline Sans", "sans-serif"]
                    },
                    borderRadius: {
                        "DEFAULT": "0.25rem",
                        "lg": "0.5rem",
                        "xl": "0.75rem",
                        "full": "9999px"
                    },
                },
            },
        }
    </script>
    <style>
        .tile-container {
            position: relative;
        }

        .tile {
            position: absolute;
            transition: transform 0.12s ease-out;
        }

        .tile-new {
            animation: tilePopIn 0.15s ease;
        }

        .tile-merged {
            animation: tilePulse 0.2s ease;
        }

        @keyframes tilePopIn {
            0% {
                transform: scale(0);
                opacity: 0;
            }

            100% {
                transform: scale(1);
                opacity: 1;
            }
        }

        @keyframes tilePulse {
            0% {
                transform: scale(1);
            }

            50% {
                transform: scale(1.12);
            }

            100% {
                transform: scale(1);
            }
        }
    </style>
    <link rel="stylesheet" href="../auth.css">
</head>

<body
    class="bg-background-light dark:bg-background-dark font-display text-slate-900 dark:text-white min-h-screen flex flex-col">

    <!-- Header / Nav -->
    <header
        class="flex items-center justify-between border-b border-solid border-b-[#282e39] bg-background-dark/80 backdrop-blur-md sticky top-0 z-50 px-6 py-4 lg:px-20">
        <div class="flex items-center gap-3 text-white">
            <a href="/" class="text-xl font-bold leading-tight tracking-tight hover:text-primary transition-colors">Rase
                Games</a>
        </div>
        <div class="flex items-center gap-6">
            <a href="/" class="text-sm text-[#9da6b9] hover:text-primary transition-colors">Games</a>
            <a href="/about" class="text-sm text-[#9da6b9] hover:text-primary transition-colors">About</a>
            <a href="/leaderboard" class="text-sm text-[#9da6b9] hover:text-primary transition-colors">Leaderboards</a>
            <a href="/community" class="text-sm text-[#9da6b9] hover:text-primary transition-colors">Community</a>
            <div id="user-display"></div>
        </div>
    </header>

    <!-- Main Content Area -->
    <main class="flex-grow flex flex-col items-center justify-center py-8 px-4 lg:px-20">
        <div class="w-full max-w-xl flex flex-col gap-6">

            <!-- Stats Row -->
            <div class="flex justify-between items-center gap-4">
                <!-- Text Description -->
                <div class="flex-1">
                    <h1 class="text-3xl lg:text-4xl font-bold text-white mb-2 flex items-center gap-3">
                        <span
                            class="size-10 flex items-center justify-center bg-primary rounded-lg shadow-lg shadow-primary/20">
                            <span class="material-symbols-outlined text-2xl">bolt</span>
                        </span>
                        Power 2048
                    </h1>
                    <p class="text-slate-400 text-sm font-medium leading-relaxed">Join the numbers and reach the <span
                            class="text-white font-bold">2048 tile!</span></p>
                </div>

                <!-- Tile Cards -->
                <div class="flex gap-3">
                    <div
                        class="flex min-w-[100px] flex-col gap-1 rounded-lg bg-[#1e293b] border border-[#3b4354] py-2 px-4 items-center text-center shadow-lg">
                        <span class="text-[#9da6b9] text-xs font-bold tracking-widest uppercase">Current</span>
                        <span id="currentTile" class="text-white text-xl font-bold leading-none">0</span>
                    </div>
                    <div
                        class="flex min-w-[100px] flex-col gap-1 rounded-lg bg-[#1e293b] border border-[#3b4354] py-2 px-4 items-center text-center shadow-lg">
                        <span class="text-[#9da6b9] text-xs font-bold tracking-widest uppercase">Best</span>
                        <span id="bestTile" class="text-white text-xl font-bold leading-none">0</span>
                    </div>
                </div>
            </div>

            <!-- Game Board Container -->
            <div class="relative bg-grid-bg rounded-xl p-4 shadow-2xl border border-[#3b4354]">
                <!-- The Grid -->
                <div id="gameBoard" class="grid grid-cols-4 gap-3 aspect-square">
                    <!-- Cells will be generated by JS -->
                </div>
            </div>

            <!-- Controls -->
            <div class="flex flex-col sm:flex-row justify-between items-center gap-4">
                <div class="flex gap-3">
                    <button id="restartBtn"
                        class="flex items-center justify-center rounded-lg h-10 px-6 bg-primary hover:bg-primary-dark transition-colors text-white text-sm font-bold tracking-wide shadow-lg shadow-primary/20">
                        <span class="material-symbols-outlined mr-2 text-[20px]">restart_alt</span>
                        New Game
                    </button>
                </div>

                <div class="flex flex-col sm:flex-row justify-between items-center text-[#9da6b9] text-sm">
                    <p class="mb-2 sm:mb-0">
                        Use <strong class="text-white">arrow keys</strong> or <strong class="text-white">swipe</strong>
                        to move
                    </p>
                    <div class="flex gap-1 text-white opacity-50 ml-3">
                        <span class="material-symbols-outlined text-lg">keyboard_arrow_left</span>
                        <span class="material-symbols-outlined text-lg">keyboard_arrow_down</span>
                        <span class="material-symbols-outlined text-lg">keyboard_arrow_up</span>
                        <span class="material-symbols-outlined text-lg">keyboard_arrow_right</span>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <!-- Game Over Overlay -->
    <div id="gameOverScreen"
        class="fixed inset-0 bg-black/80 backdrop-blur-sm z-50 flex items-center justify-center hidden">
        <div class="bg-[#1e293b] p-8 rounded-2xl shadow-2xl border border-[#3b4354] max-w-md text-center">
            <h2 class="text-3xl font-bold mb-4 text-red-400">Game Over</h2>
            <p class="text-slate-400 mb-2">Highest Tile</p>
            <p id="finalScore" class="text-5xl font-bold text-white mb-6">0</p>
            <button id="gameOverRestartBtn"
                class="px-8 py-3 bg-primary hover:bg-primary-dark text-white font-bold rounded-lg transition-colors shadow-lg shadow-primary/20 flex items-center justify-center gap-2 mx-auto">
                <span class="material-symbols-outlined">restart_alt</span>
                Try Again
            </button>
        </div>
    </div>

    <script src="game.js"></script>
</body>

</html>